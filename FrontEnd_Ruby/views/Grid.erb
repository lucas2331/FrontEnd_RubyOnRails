<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/themes/redmond/jquery-ui.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/free-jqgrid/4.15.5/css/ui.jqgrid.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/free-jqgrid/4.15.5/jquery.jqgrid.min.js"></script>
    <script src="http://jqueryvalidation.org/files/dist/jquery.validate.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title> Ruby - Grid </title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,600" rel="stylesheet">

    <!-- Styles -->
    <style>

          html, body {
              background-color: #fff;
              color: #636b6f;

              font-family: 'Nunito', sans-serif;
              font-weight: 200;

              height: 100vh;
              margin: 0;
          }

          * {
            box-sizing: border-box;
          }

          .full-height {
              height: 40vh;
          }

          .flex-center {
              align-items: center;
              display: autocomplete;
              justify-content: right;
          }

          .position-ref {
              position: relative;
          }

          .full-height-2 {
              height: 40vh;
          }

          .flex-center-2 {
              align-items: center;
              display: grid;
              justify-content: left;
          }

          .position-ref-2 {
              position: relative;
          }

          .top-right {
              position: absolute;
              right: 10px;
              top: 30px;
          }

          .content {
              padding: 0;
              top: 0;
              text-align: center;
          }

          .title {
              font-size: 84px;
          }

          .links > a {
              color: #636b6f;
              padding: 0 25px;
              font-size: 13px;
              font-weight: 600;
              letter-spacing: .1rem;
              text-decoration: none;
              text-transform: uppercase;
          }

          .m-b-md {
              margin-bottom: 0px;
              font-size: 70px;
          }

          .m-b-md-2{
              margin-bottom: 15px;
              font-size: 40px;
          }

          .form-style-8 {
            height: 510px;
             width: 480px;
             padding: 30px;
             margin: -102px 30px 50px 45px;
             <!-- CIMA | ESQUERDA | BAIXO | DIREITA -->

             background: #FFFFFF;

             box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.35);
             -moz-box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.35);
             -webkit-box-shadow:  0px 0px 15px rgba(0, 0, 0, 0.35);
           }

           .form-style-80 {
              height: 1300px;
              width: 650px;
              padding: 30px;
              margin-left:325px;
              <!-- CIMA | ESQUERDA | BAIXO | DIREITA -->

              background: #FFFFFF;

              box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.35);
              -moz-box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.35);
              -webkit-box-shadow:  0px 0px 15px rgba(0, 0, 0, 0.35);
            }

           .form-style-8 h2 {
              background: #636b6f;
              text-transform: uppercase;
              font-family: 'Nunito', sans-serif;
              color: #fff;
              font-size: 18px;
              font-weight: 80;
              padding: 20px;
              margin: -30px -30px 30px -30px;
            }

            .form-style-8 h3 {
              background: #636b6f;
              text-transform: uppercase;
              font-family: 'Nunito', sans-serif;
              color: #fff;
              font-size: 18px;
              font-weight: 80;
              padding: 20px;
              margin: -30px -30px 40px -30px;
             }

             .form-style-8 h4 {
               background: #636b6f;
               text-transform: uppercase;
               font-family: 'Nunito', sans-serif;
               color: #fff;
               font-size: 18px;
               font-weight: 80;
               padding: 20px;
               margin: 20px -30px 40px -30px;
              }

             .form-style-8 a {
               text-decoration: none;
               color: #fff;
             }

             .form-style-80 h2 {
                background: #636b6f;
                text-transform: uppercase;
                font-family: 'Nunito', sans-serif;
                color: #fff;
                font-size: 18px;
                font-weight: 80;
                padding: 20px;
                margin: -30px -30px 30px -30px;
              }

              .form-style-80 h3 {
                background: #636b6f;
                text-transform: uppercase;
                font-family: 'Nunito', sans-serif;
                color: #fff;
                font-size: 18px;
                font-weight: 80;
                padding: 20px;
                margin: 20px -20px 30px -20px;
               }

               .form-style-80 h4 {
                 background: #636b6f;
                 text-transform: uppercase;
                 font-family: 'Nunito', sans-serif;
                 color: #fff;
                 font-size: 18px;
                 font-weight: 80;
                 padding: 20px;
                 margin: 30px -30px 30px -30px;
                }

               .form-style-80 a {
                 text-decoration: none;
                 color: #fff;
               }

            .form-style-8 input[type="text"],
            .form-style-8 input[type="date"],
            .form-style-8 input[type="datetime"],
            .form-style-8 input[type="email"],
            .form-style-8 input[type="number"],
            .form-style-8 input[type="search"],
            .form-style-8 input[type="time"],
            .form-style-8 input[type="url"],
            .form-style-8 input[type="password"],
            .form-style-8 textarea,
            .form-style-8 select
            {
               box-sizing: border-box;
               -webkit-box-sizing: border-box;
               -moz-box-sizing: border-box;
               outline: none;
               display: block;
               width: 80%;
               padding: 7px;
               border: none;
               border-bottom: 1px solid #ddd;
               background: transparent;
               margin-bottom: 10px;
               font: 16px Arial, Helvetica, sans-serif;
               height: 45px;
             }

             .form-style-8 button,
             .form-style-8 input[type="button"],
             .form-style-8 input[type="submit"],
             .form-style-8 input[type="reset"]{
               -moz-box-shadow: inset 0px 1px 0px 0px #45D6D6;
               -webkit-box-shadow: inset 0px 1px 0px 0px #45D6D6;
               box-shadow: inset 0px 1px 0px 0px #45D6D6;
               background-color: #2CBBBB;
               border: 1px solid #27A0A0;
               display: inline-block;
               cursor: pointer;
               color: #FFFFFF;
               font-family: 'Open Sans Condensed', sans-serif;
               font-size: 14px;
               padding: 8px 18px;
               text-decoration: none;
               text-transform: uppercase;
             }

             .form-style-8 input[type="button"]:hover,
             .form-style-8 input[type="submit"]:hover {
             background:linear-gradient(to bottom, #34CACA 5%, #30C9C9 100%);
             background-color:#34CACA;
           }

           .form-style-80 input[type="text"],
           .form-style-80 input[type="date"],
           .form-style-80 input[type="datetime"],
           .form-style-80 input[type="email"],
           .form-style-80 input[type="number"],
           .form-style-80 input[type="search"],
           .form-style-80 input[type="time"],
           .form-style-80 input[type="url"],
           .form-style-80 input[type="password"],
           .form-style-80 textarea,
           .form-style-80 select
           {
              box-sizing: border-box;
              -webkit-box-sizing: border-box;
              -moz-box-sizing: border-box;
              outline: none;
              display: block;
              width: 80%;
              padding: 7px;
              border: none;
              border-bottom: 1px solid #ddd;
              background: transparent;
              margin-bottom: 10px;
              height: 45px;
            }

            .form-style-80 button,
            .form-style-80 input[type="button"],
            .form-style-80 input[type="submit"],
            .form-style-80 input[type="reset"]{
              -moz-box-shadow: inset 0px 1px 0px 0px #45D6D6;
              -webkit-box-shadow: inset 0px 1px 0px 0px #45D6D6;
              box-shadow: inset 0px 1px 0px 0px #45D6D6;
              background-color: #2CBBBB;
              border: 1px solid #27A0A0;
              display: inline-block;
              cursor: pointer;
              color: #FFFFFF;
              font-family: 'Open Sans Condensed', sans-serif;
              font-size: 14px;
              padding: 8px 18px;
              text-decoration: none;
              text-transform: uppercase;
            }

            .form-style-80 input[type="button"]:hover,
            .form-style-80 input[type="submit"]:hover {
            background:linear-gradient(to bottom, #34CACA 5%, #30C9C9 100%);
            background-color:#34CACA;
          }



      </style>

    <script type="text/javascript">
      $(function () {

        $('#grid').trigger( 'reloadGrid' );

        jQuery("#grid").jqGrid({
            caption: "Grid do JSON",
            url: '/JsonPuro.rb',
            datatype: "json",

            jsonReader : {
              root: "rows",
              page: "page",
              total: "total",
              records: "records",
              repeatitems: true,
              cell: "cell",
              id: "id",
              userdata: "userdata",
              subgrid: {root:"rows",
                repeatitems: true,
                cell:"cell"
              }
            },

            colNames: ['Codigo', 'Nome', 'Sobrenome', 'Data'],

            colModel: [
                { name: 'Codigo'    , index: 'Codigo', sorttype:"int"},
                { name: 'Nome'      , index: 'Nome'},
                { name: 'Sobrenome' , index: 'Sobrenome'},
                { name: 'Data'      , index: 'Data'}
            ],

            rowNum:50,
		   	    rowList:[50,100],
            pager: '#pager2',
            sortname: 'Codigo',
            viewrecords: true,
            sortorder: "desc",
            shrinkToFit : false

        }).navGrid('#pager2', {edit:false,add:false,del:false});

        jQuery("#Pegar").click( function(){
	         var id = jQuery("#grid").jqGrid('getGridParam','selrow');

           if (id)	{
		           var ret = jQuery("#grid").jqGrid('getRowData',id);

               document.getElementById('Codigo').value = ret.Codigo;
               document.getElementById('Nome').value = ret.Nome;
               document.getElementById('Sobrenome').value = ret.Sobrenome;
               document.getElementById('Data').value = ret.Data;

           }

           else {
             alert("Por favor, selecione um item!");
           }
         });

         jQuery("#Pegar2").click( function(){
           var id = jQuery("#grid").jqGrid('getGridParam','selrow');

           if(id){

           }

           else {
             alert("Por favor, selecione um item!");
           }
         }

       )

      });

      function RecarregarPagina(){
        window.location.reload();
      }
    </script>

</head>
  <body>
    <div class="flex-center position-ref full-height">
      <div class="content">
        <div class="title m-b-md">
          Grid
        </div>

        <div class="title m-b-md-2">
          Ruby on Rails
        </div>

        <div class="form-style-80">
          <h2> Grid </h2>
          <table id="grid"></table>
          <div id="pager2"></div>

          <h4> Funções </h4>
          <button type="submit" onClick="RecarregarPagina()">Recarregar</button>
          <button> <a href="#" id="Pegar"> Selecionar </a> </button>

    <form action="/AlteraUsuario2.rb" id="AlterarUsuario" method="post">

      <script>
          function VerificaNumero(n) {
              if (n.which != 8 && n.which != 0 && (n.which < 48 || n.which > 57)) {
                  return false;
              }
          }
          $(document).ready(function() {
              $("#Data").keypress(VerificaNumero);
              $("#Codigo").keypress(VerificaNumero);
         });

         function VerificaLetra(l) {
  	         if (l.which != 8 && l.which != 0 && (l.which < 65 || l.which > 122)){
  	            return false;
              }
         }
         $(document).ready(function() {
             $("#Nome").keypress(VerificaLetra);
             $("#Sobrenome").keypress(VerificaLetra);
        });

          $("#Data").mask("00/00/0000");
      </script>


          <h4> Alterar </h4>

          <input type="text" autocomplete="off" name="Altera[Codigo]" id="Codigo" placeholder="Codigo" maxlength="2" required>
          <input type="text" autocomplete="off" name="Altera[Nome]" id="Nome" placeholder="Nome" maxlength="15" required>
          <input type="text" autocomplete="off" name="Altera[Sobrenome]" id="Sobrenome" placeholder="Sobrenome" maxlength="15" required>
          <input type="text" autocomplete="off" name="Altera[Data]" id="Data" placeholder="Data" maxlength="8" required>

          <h4> Botões </h4>
          <input type="submit" name="Enviar" value="Enviar"/>
          <button>
            <a href="../"> Home </a>
          </button>
          <input type="reset" name="ApagarTudo" value="Resetar"/>
        </div>
      </div>

    </form>
  </body>
</html>
